<!-- sidebar -->
<nav>
  <ul class="menu-sidebar nav nav-list">
    <% Category.roots.each do |category| %>
      <li class="dropdown">
        <a class="accordion-heading" data-toggle="collapse" data-target="#submenu-<%= category.id %>">
          <span class="nav-header-primary">
            <%= category.name %>
            <% if category.has_children? %>
              <span class="pull-right">
                <b class="caret"></b>
              </span>
            <% end %>
          </span>
        </a>

        <% if category.has_children? %>
          <ul class="menu-sidebar nav nav-list collapse" id="submenu-<%= category.id %>">
            <% category.children.each do |sub_category| %>
              <li class="dropdown">
                <a class="accordion-heading" data-toggle="collapse">
                  - <%= sub_category.name%>
                </a>
              </li>
            <% end %>
          </ul>
        <% end %>
      </li>
    <% end %>
  </ul>
</nav>

<style>
  .menu-sidebar {
    background-color: #eeeeee;
  }
  .menu-sidebar > li > a:hover,
  .menu-sidebar > li > a:focus {
    color: #fff;
    background-color: #428bca;
  }
</style>

<script>
$(function () {
  $('ul.nav li.dropdown').hover(function(event) {
    $(this).find('.menu-sidebar').stop(true, true).fadeIn();
  }, function(event) {
    $(this).find('.menu-sidebar').stop(true, true).fadeOut();
  });
})
</script>